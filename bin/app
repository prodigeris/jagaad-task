#!/usr/bin/env php
<?php

declare(strict_types=1);

use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Loader\YamlFileLoader;
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBag;

require __DIR__ . '/../vendor/autoload.php';

$containerBuilder = new ContainerBuilder(new ParameterBag($_ENV));
$loader = new YamlFileLoader($containerBuilder, new FileLocator(__DIR__));
$loader->load(__DIR__ . '/../services.yaml');


$containerBuilder->compile();

$client = $containerBuilder->get(\JagaadTask\Components\WeatherApi\Client::class);

$forecast = $client->getForecast(new \JagaadTask\Components\WeatherApi\ValueObject\Coordinates(52.374, 4.9), 2);

print_r($forecast->getIterator());
